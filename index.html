<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phaser Scene Transitions</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.88.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>

<script>
// Helper function to add background safely
function addBackground(scene, key) {
    if (scene.textures.exists(key)) {
        scene.add.image(window.innerWidth / 2, window.innerHeight / 2, key)
             .setDisplaySize(window.innerWidth, window.innerHeight);
    } else {
        console.warn(`Image ${key} failed to load. Adding fallback background.`);
        scene.cameras.main.setBackgroundColor('#000'); // Black fallback
    }
}

// Scene 1
class TitleScene extends Phaser.Scene {
    constructor() { super({ key: 'TitleScene' }); }

    preload() {
        this.load.image('title_bg', 'https://i.imgur.com/2HqsF6j.gif');
    }

    create() {
        addBackground(this, 'title_bg');
        this.add.text(window.innerWidth / 2, window.innerHeight / 2, 'Title Screen', 
            { fontSize: '50px', fill: '#fff' }).setOrigin(0.5);

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene2'));
    }
}

// Scene 2
class Scene2 extends Phaser.Scene {
    constructor() { super({ key: 'Scene2' }); }

    preload() {
        this.load.image('scene2_bg', 'https://i.imgur.com/ZOL8lqy.gif');
    }

    create() {
        addBackground(this, 'scene2_bg');
        this.add.text(window.innerWidth / 2, window.innerHeight / 2, 'Scene 2', 
            { fontSize: '50px', fill: '#fff' }).setOrigin(0.5);

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene3'));
    }
}

// Scene 3
class Scene3 extends Phaser.Scene {
    constructor() { super({ key: 'Scene3' }); }

    preload() {
        this.load.image('scene3_bg', 'https://i.imgur.com/PlLrpy0.gif');
    }

    create() {
        addBackground(this, 'scene3_bg');
        this.add.text(window.innerWidth / 2, window.innerHeight / 2, 'Scene 3', 
            { fontSize: '50px', fill: '#fff' }).setOrigin(0.5);

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene4'));
    }
}

// Scene 4
class Scene4 extends Phaser.Scene {
    constructor() { super({ key: 'Scene4' }); }

    preload() {
        this.load.image('scene4_bg', 'https://i.imgur.com/afIvznh.gif');
    }

    create() {
        addBackground(this, 'scene4_bg');
        this.add.text(window.innerWidth / 2, window.innerHeight / 2, 'Scene 4', 
            { fontSize: '50px', fill: '#fff' }).setOrigin(0.5);

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene5'));
    }
}

// Scene 5
class Scene5 extends Phaser.Scene {
    constructor() { super({ key: 'Scene5' }); }

    preload() {
        this.load.image('scene5_bg', 'https://i.imgur.com/SjzbUQi.gif');
    }

    create() {
        addBackground(this, 'scene5_bg');
        this.add.text(window.innerWidth / 2, window.innerHeight / 2, 'Scene 5', 
            { fontSize: '50px', fill: '#fff' }).setOrigin(0.5);

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('TitleScene')); // Loop back to Scene 1
    }
}

// âœ… Now create the Phaser game AFTER defining all scenes
const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    scene: [TitleScene, Scene2, Scene3, Scene4, Scene5]
};

const game = new Phaser.Game(config);
</script>

</body>
</html>
