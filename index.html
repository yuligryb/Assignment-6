<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phaser Scene Transitions</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.88.2/dist/phaser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; font-family: "Press Start 2P", cursive; }
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: -1;
        }
    </style>
</head>
<body>

<!-- Background Element for GIFs -->
<div id="background" class="background"></div>

<script>
// ✅ Preload Font Scene (Ensures font loads before Scene 1)
class PreloadScene extends Phaser.Scene {
    constructor() { super({ key: 'PreloadScene' }); }

    create() {
        document.fonts.ready.then(() => {
            console.log('✅ Font Loaded! Starting Title Scene...');
            this.scene.start('TitleScene'); // Load Title Scene after font is ready
        });
    }
}

// ✅ Helper function to set GIF backgrounds
function setGIFBackground(url) {
    document.getElementById("background").style.backgroundImage = `url('${url}')`;
}

// ✅ Function to add pixel-art styled text
function addPixelText(scene, message) {
    scene.add.text(window.innerWidth / 2, window.innerHeight / 2, message, {
        fontSize: '32px',
        fontFamily: '"Press Start 2P", cursive',
        fill: '#ffffff',
        align: 'center'
    }).setOrigin(0.5);
}

// Scene 1
class TitleScene extends Phaser.Scene {
    constructor() { super({ key: 'TitleScene' }); }

    create() {
        setGIFBackground('assets/1.gif'); // ✅ Make GIF animate
        addPixelText(this, 'Welcome');

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene2'));
    }
}

// Scene 2
class Scene2 extends Phaser.Scene {
    constructor() { super({ key: 'Scene2' }); }

    create() {
        setGIFBackground('assets/2.gif'); // ✅ Make GIF animate
        addPixelText(this, 'To My');

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene3'));
    }
}

// Scene 3
class Scene3 extends Phaser.Scene {
    constructor() { super({ key: 'Scene3' }); }

    create() {
        setGIFBackground('assets/3.gif'); // ✅ Make GIF animate
        addPixelText(this, 'Phaser Transitions');

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene4'));
    }
}

// Scene 4
class Scene4 extends Phaser.Scene {
    constructor() { super({ key: 'Scene4' }); }

    create() {
        setGIFBackground('assets/4.gif'); // ✅ Make GIF animate
        addPixelText(this, 'Thank You!!!');

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('Scene5'));
    }
}

// Scene 5
class Scene5 extends Phaser.Scene {
    constructor() { super({ key: 'Scene5' }); }

    create() {
        setGIFBackground('assets/5.gif'); // ✅ Make GIF animate
        addPixelText(this, 'Yippee!!!');

        this.cameras.main.fadeIn(500, 0, 0, 0);
        this.input.keyboard.on('keydown-SPACE', () => this.scene.start('TitleScene')); // Loop back to Scene 1
    }
}

// ✅ Now create the Phaser game AFTER defining all scenes
const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    scene: [PreloadScene, TitleScene, Scene2, Scene3, Scene4, Scene5]
};

const game = new Phaser.Game(config);
</script>

</body>
</html>
